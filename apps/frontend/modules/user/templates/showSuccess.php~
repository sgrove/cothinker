<?php
// auto-generated by sfPropelCrud
// date: 2008/04/04 15:24:10
?>
<?php use_helper('Date', 'Number', 'I18N', 'Form', 'Javascript', 'Star', 'Global') ?>
<?php $tab = $sf_params->get('tab') ?>
<?php if (!isset($tab)): ?>
  <?php if ($sf_user->isAuthenticated()) { $tab = 'personal';  } else { $tab = 'profile'; } ?>
<?php endif; ?>
<?php if ($tab == 'personal' && !$sf_user->isAuthenticated() || ($tab == 'personal' && $sf_user->isAuthenticated() && $profile->getUserId() != $sf_user->getId())) $tab = 'profile' // Basic security check?>
  <div id="project-tabs">
    <ul>
	<?php echo nav_tabs('profile', $tab, $profile); ?>
    </ul>
  </div>

<?php if ($tab == 'personal') include_partial('profile_personal', array('profile' => $profile)) ?>
<?php if ($tab == 'profile') include_partial('profile_main', array('profile' => $profile)) ?>
<?php if ($tab == 'blog') include_partial('profile_blog', array('profile' => $profile)) ?>
<?php if ($tab == 'projects') include_partial('profile_projects', array('profile' => $profile)) ?>
<?php /*
<div>
  <?php echo link_to('return', 'user') ?>
</div>
<table>
<tbody>
<tr>
<th>Login: </th>
<td><?php echo $sf_guard_user_profile->getSfGuardUser() ?></td>
</tr>
<tr>
<th>Campus: </th>
<td><?php echo $sf_guard_user_profile->getCampus() ?></td>
</tr>
<tr>
<th>Department: </th>
<td><?php echo $sf_guard_user_profile->getDepartment() ?> / <?php echo $sf_guard_user_profile->getSubdepartment() ?></td>
</tr>
<tr>
<th></th>
<td><?php echo $sf_guard_user_profile->getFullName() ?> (<?php echo $sf_guard_user_profile->getTitle() ?>)</td>
</tr>
<tr>
<th>Photo: </th>
<td>
  <?php echo image_tag($sf_guard_user_profile->getThumbnail()) ?>
</td>
</tr>
<tr>
<th>Rating: </th>
<td><?php echo $sf_guard_user_profile->getRating() ?> (<?php echo $sf_guard_user_profile->getRatingCount() ?>)</td>
</tr>
<tr>
  <th>
    Connect:
  </th>
  <td>
    <?php if ($sf_user->isAuthenticated()): ?>
      <?php $socon = $sf_user->getProfile()->getConnection($sf_guard_user_profile->getUserId()) ?>
      <?php if ($socon != null): ?>
        <?php if ($socon->getStatus() == sfConfig::get('app_socon_status_pending')): ?>
          <?php echo "You have a pending connection request." ?>
        <?php elseif ($socon->getStatus() == sfConfig::get('app_socon_status_approved')): ?>
          <?php echo "You and ".$sf_guard_user_profile->getFullName().' socially connected on '.format_date($socon->getCreatedAt()).'.' ?>
        <?php elseif ($socon->getStatus() == sfConfig::get('app_socon_status_declined')): ?>
          <?php echo "You have a declined connection request." ?>
        <?php endif; ?>
      <?php elseif(!$sf_user->isAuthenticated()): ?>
        <?php echo link_to('Login', '@sf_guard_signin').' to connect to '.$sf_guard_user_profile->getFullName(); ?>
      <?php else: ?>
        <?php echo link_to(ucfirst(__('add '.$sf_guard_user_profile->getFullName().' as a connection')), 'networks/requestConnection?connect='.$sf_guard_user_profile->getUuid()) ?>
    <?php endif; ?>
  <?php endif;?>
  </td>
</tr>
</tbody>
</table>
<?php /*
<div class="project-titlebar">User Groups and Permissions</div>
<div>
  <?php $user = $sf_guard_user_profile->getSfGuardUser(); echo $user; ?>:<br />
  Groups (<?php echo count($user->getGroups()) ?>):<br />
  <?php foreach ($user->getGroups() as $group): ?>
    <?php echo $group->getName() ?>: <?php echo $group->getDescription() ?><br />
  <?php endforeach ?>
  <br />
  Permissions (<?php echo count($user->getAllPermissions()) ?>):<br />
  <?php foreach ($user->getAllPermissions() as $permission): ?>
    <?php echo $permission->getName() ?>: <?php echo $permission->getDescription() ?><br />
  <?php endforeach ?>
  <br />
  <div class="clear-both">
    
  </div>
</div>

<div class="project-titlebar">User Contacts</div>
<?php include_partial('user_contacts', array('user' => $sf_guard_user_profile)) ?>
<hr />
 */ ?>
