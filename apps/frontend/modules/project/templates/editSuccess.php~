<?php
// auto-generated by sfPropelCrud
// date: 2008/04/03 03:08:20
?>
<?php use_helper('Object', 'Global', 'Project') ?>

<?php include_partial("home/storage_div")?>

<?php $tab = $sf_params->get('tab') ?>
<?php if (!isset($tab)) $tab = 'Edit' ?>
  <div id="project-tabs">
    <ul>
	<?php echo nav_tabs('project', $tab); ?>
    </ul>
  </div>

<h1>Edit Project</h1>
  <div id="project-details" style="display:block;">
    <?php echo form_tag('project/update', array('class' => 'project-edit')) ?>
    	<?php echo object_input_hidden_tag($project, 'getSlug') ?>
	<?php echo label_for('title', 'Project Title'), object_input_tag($project, 'getTitle', array ('size' => 80,)) ?>
	<?php echo label_for('department', 'Department'), object_select_tag($project, 'getDepartmentId', array ('related_class' => 'Department', 'peer_method' => 'retrieveAlphabetical')) ?>
	<?php echo label_for('description', 'Description'), object_textarea_tag($project, 'getDescription', array ('size' => '20x3',)) ?>
      	<?php echo label_for('description', 'Additional notes for your project'), object_textarea_tag($project, 'getNotes', array ('size' => '20x3',)) ?>
      	<?php echo label_for('description', 'Project tags (keywords)'), object_textarea_tag($project, 'getTagsAsText', array ('size' => '20x2',)) ?>

	<?php echo label_for('goals', 'Project Goals'.image_tag('greenplus')), input_tag('goals[]', '', array ('size' => 80,)), image_tag('greenminus') ?>
	<ul>
	<li><?php echo label_for('season', 'Season'), select_tag_seasons('season', $project->getSeason()), select_tag_project_years('year', $project->getYear()) ?></li>
	<li><?php echo label_for('begin', 'Begin'), object_input_date_tag($project, 'getBegin', array ('rich' => true,)) ?></li>
	<li><?php echo label_for('finish', 'Finish'), object_input_date_tag($project, 'getFinish', array ('rich' => true,)) ?></li>
	<li><?php echo label_for('applications', 'Applications'), select_tag_project_applications('applications', $project->getApplications()) ?></li>
	</ul>
	<div style="text-align:center;">
	<ul style="clear:both;">
	  <li><?php echo label_for('campus', 'Campus'), select_tag_project_scale('scale', $project->getScale()) ?></li>
	  <li><?php echo label_for('published', 'Published'), select_tag_yes_no('published', $project->getPublished()) ?></li>
	  <?php //Views:echo $project->getHits() ?>
	  <li><?php echo submit_tag('save', array('class' => 'btn')) ?></li>
	</ul>
	</div>
    </form>

  </div>
<?php if (!isset($newProject) || !$newProject): ?>
  
  <?php if ($sf_user->isAuthenticated() && $project->hasPermission('handle-applications')): ?>
  	<div><?php include_partial('edit_positions', array('project' => $project, 'newPosition' => $newPosition, 'collapsable' => true, 'collapsed' => 'false'), array('evalScripts' => 'true'))?></div>
  <?php elseif (!$project->hasPermission('handle-applications')): ?>
    <div>Sorry, you do not have permission to handle applications for this project.
      <br />
      was looking for <?php echo $project->getUuid().'-handle-applications' ?>
    </div>
  <?php endif ?>
  
	<div><?php include_partial('edit_project_tasklist', array('project' => $project, 'projectUsers' => $projectUsers, 'collapsable' => true), array('evalScripts' => 'true'))?></div>

<?php endif ?>
</div>
